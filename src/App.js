import React, { useState, useEffect, useCallback } from 'react';
import './App.scss';
import Zoom from 'react-reveal/Zoom';
import Jello from 'react-reveal/Jello';
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function App() {
  const [buttonName, setButtonName] = useState('Hap')
  const [count, setCount] = useState(0)
  // create web audio api context

  const hbd = [
    264, 264, 297, 264, 352, 330,
    264, 264, 297, 264, 396, 352,
    264, 264, 523.25, 440, 352, 330, 297,
    466, 466, 440, 352, 396, 352
  ];

  const words = [
    'Hap-', 'py', 'birth-', 'day', 'to', 'ðŸ‘‰ You ðŸ‘',
    'Hap-', 'py', 'birth-', 'day', 'to', 'ðŸ™‹â€â™‚ï¸ You ðŸ‘ˆ',
    'Hap-', 'py', 'birth-', 'day', 'to', 'You', 'ðŸ¦„ðŸ• Sandy ðŸ‘¸ðŸ™ˆ',
    'Hap-', 'py', 'birth-', 'day', 'to', 'ðŸŽ‰ You ðŸŽŠ'
  ]

  const playNote = useCallback((frequency = 440, duration = 100, word) => {
    // create Oscillator node
    const oscillator = audioCtx.createOscillator();
    oscillator.type = 'square';
    oscillator.frequency.value = frequency; // value in hertz
    oscillator.connect(audioCtx.destination);
    oscillator.start();
    setButtonName(word)

    setTimeout(() => oscillator.stop(), duration);
  }, []);

  useEffect(() => {
    console.log('hit effe', count)
    if (count === 0) {
      console.log('inside if', count)
      const hz = hbd[(count)]
      let dur = 100;

      const word = words[count]

      if (count === 18) {
        dur = dur * 5;
        // $btn.classList.add('animated', 'tada')
      } else {
        // $btn.classList.remove('animated', 'tada')
      }
      // $btn.innerText = word
      playNote(hz, dur, word);

      setCount(count + 1);
    }
  }, [count, hbd, playNote, words])


  const handerClick = () => {
    if (count >= hbd.length) {
      console.log('restting', count)
      setCount(0)
    } else {
      const hz = hbd[(count)]
      let dur = 100;
      const word = words[count]
      if (count === 18) {
        dur = dur * 5;
      } else {
      }
      playNote(hz, dur, word);

      setCount(count + 1);
    };
  }

  return (
    <>
      <span className='bokeh'></span>
      <span className='bokeh'></span>
      <span className='bokeh'></span>
      <span className='bokeh'></span>
      <span className='bokeh'></span>
      <span className='bokeh'></span>
      <span className='bokeh'></span>
      <span className='bokeh'></span>
      <span className='bokeh'></span>
      <span className='bokeh'></span>
      <span className='bokeh'></span>
      <span className='bokeh'></span>
      <span className='bokeh'></span>

      <div className="pyro">
        <div className="before"></div>
        <div className="after"></div>
      </div>

      <Zoom>
        <h1>Wishing you a very </h1>
      </Zoom>
      <Zoom delay={200}>
        <h2>Happy Birthday Sandani!</h2>
      </Zoom>

      <svg viewBox="0 -28 512.00006 512" xmlns="http://www.w3.org/2000/svg"><path id="corazon" d="m58.90625 374.609375c12.652344-12.726563 29.183594-34.480469 24.085938-57.089844-3.101563-13.777343-16.8125-22.640625-30.5-19.148437-6.753907 1.722656-12.136719 6.050781-15.363282 11.625-5.582031-3.210938-12.40625-4.269532-19.117187-2.386719-13.597657 3.820313-21.039063 18.351563-16.839844 31.835937 6.890625 22.125 32.085937 32.699219 49.402344 37.398438 2.980469.808594 6.15625-.042969 8.332031-2.234375zm0 0" fill="#e88c98" /><path d="m58.90625 374.609375c4.273438-4.296875 8.984375-9.625 13.160156-15.667969-49.039062-7.242187-57.410156-32.050781-55.210937-50.972656-12.859375 4.296875-19.765625 18.378906-15.683594 31.476562 6.890625 22.125 32.082031 32.703126 49.402344 37.398438 2.980469.808594 6.15625-.042969 8.332031-2.234375zm0 0" fill="#db818d" /><path d="m325.796875 318.28125c25.878906-4.074219 49.363281 14.621094 51.605469 40.277344.78125 8.890625 8.183594 13.203125 16.488281 14.828125 7.261719 1.414062 9.121094 10.875 3.046875 15.097656-20.523438 14.265625-42.75 17.003906-60.195312 18.53125-25.652344 2.246094-48.140626-17.636719-48.625-43.832031-.40625-22.105469 15.835937-41.464844 37.679687-44.902344zm0 0" fill="#7f9ae6" /><path d="m347.371094 446.878906c-1.410156 0-2.84375-.15625-4.277344-.484375-14.464844-3.304687-30.0625-13.945312-42.796875-29.183593-18.4375-22.066407-19.882813-39.800782-19.101563-48.40625.949219-10.515626 10.230469-18.269532 20.765626-17.320313 10.515624.953125 18.269531 10.25 17.316406 20.765625-.253906 2.804688 2.335937 10.832031 10.367187 20.441406 8.089844 9.683594 17.058594 15.300782 21.972657 16.425782 10.292968 2.351562 16.730468 12.605468 14.378906 22.902343-2.027344 8.855469-9.90625 14.859375-18.625 14.859375zm0 0" fill="#f9f1da" /><path d="m268.199219 455.386719c-2.84375 0-5.730469-.636719-8.453125-1.980469-12.972656-6.40625-26.863282-18.515625-37.15625-32.394531-16.113282-21.71875-17.398438-38.515625-15.640625-48.78125 1.789062-10.40625 11.683593-17.398438 22.078125-15.613281 10.410156 1.785156 17.398437 11.671874 15.617187 22.078124-.441406 2.566407 1.5 9.886719 8.65625 19.53125 6.644531 8.960938 15.820313 17.160157 23.378907 20.890626 9.464843 4.671874 13.351562 16.140624 8.675781 25.609374-3.328125 6.746094-10.109375 10.660157-17.15625 10.660157zm0 0" fill="#f9f1da" /><path d="m285.359375 444.726562c4.671875-9.46875.789063-20.9375-8.679687-25.609374-1.484376-.734376-3.03125-1.644532-4.605469-2.691407l-22.65625 30.8125c3.453125 2.398438 6.921875 4.484375 10.332031 6.167969 2.722656 1.34375 5.605469 1.980469 8.449219 1.980469 7.046875 0 13.828125-3.914063 17.160156-10.660157zm0 0" fill="#495059" /><path d="m275.261719 27.433594c54.402343-4.761719 93.058593 29.5 97.089843 75.582031.285157 3.222656.359376 6.414063.242188 9.570313-.21875 6.03125 2.679688 11.703124 7.464844 15.378906 14.070312 10.800781 23.390625 25.9375 24.910156 43.308594 1.816406 20.773437 12.382812 39.480468 29.894531 44.582031 7.273438 2.117187 9.6875 11.285156 4.550781 16.851562-33.074218 35.882813-162.96875 75.597657-211.101562-5.792969 0 0-28.785156-30.933593-35.542969-108.183593-4.03125-46.085938 20.980469-85.917969 82.492188-91.296875zm0 0" fill="#7f9ae6" /><path d="m182.105469 101.371094c12.449219 17.78125 5.546875 29.019531-6.679688 37.578125-12.226562 8.5625-25.144531 11.203125-37.59375-6.578125-12.449219-17.777344-18.898437-48.078125-6.671875-56.640625 12.226563-8.558594 38.492188 7.863281 50.945313 25.640625zm0 0" fill="#f0e4c0" /><path d="m124.355469 389.652344c-8.828125 0-16.757813-6.152344-18.679688-15.132813-2.203125-10.324219 4.378907-20.484375 14.707031-22.691406 21.054688-4.496094 36.273438-20.820313 38.773438-41.585937 1.261719-10.484376 10.789062-17.964844 21.269531-16.695313 10.484375 1.261719 17.960938 10.785156 16.695313 21.269531-4.410156 36.664063-32.042969 66.566406-68.75 74.410156-1.347656.285157-2.691406.425782-4.015625.425782zm0 0" fill="#f5ebcd" /><path d="m128.808594 349.273438c-2.6875 1.066406-5.496094 1.929687-8.425782 2.554687-10.328124 2.203125-16.910156 12.363281-14.707031 22.691406 1.921875 8.980469 9.851563 15.128907 18.679688 15.128907 1.324219 0 2.667969-.136719 4.015625-.425782 5.175781-1.105468 10.164062-2.664062 14.9375-4.605468zm0 0" fill="#495059" /><path d="m158.789062 321.582031c4.109376 46.972657 37.707032 82.402344 105.027344 76.511719 67.324219-5.890625 94.253906-46.617188 90.144532-93.589844-4.109376-46.972656-51.132813-81.226562-105.027344-76.511718-53.894532 4.714843-94.25 46.617187-90.144532 93.589843zm0 0" fill="#f9f1da" /><path d="m263.816406 398.09375c-19.75 1.730469-36.574218-.121094-50.628906-4.753906 130.632812-19.355469 92.582031-140.832032 42.582031-165.734375 50.980469-1.382813 94.257813 31.925781 98.191407 76.902343 4.109374 46.96875-22.820313 87.695313-90.144532 93.585938zm0 0" fill="#f0e4c0" /><path d="m57.507812 156.398438c33.753907-40.222657 106.21875-68.476563 190.488282-75.847657 55.167968-4.828125 103.804687 35.980469 108.632812 91.152344 4.828125 55.167969-35.984375 103.804687-91.152344 108.628906-60.957031 5.335938-151.117187 23.972657-198.503906-15.789062-32.480468-27.25-36.714844-75.667969-9.464844-108.144531zm0 0" fill="#f9f1da" /><path d="m303.917969 91.953125c28.882812 15.4375 49.644531 44.691406 52.710937 79.75 4.824219 55.167969-35.984375 103.804687-91.152344 108.628906-41.097656 3.597657-95.464843 13.238281-141.050781 6.953125 221.746094-3.789062 213.320313-136.214844 179.492188-195.332031zm0 0" fill="#f5ebcd" /><path d="m179.378906 127.917969c20.234375 3.167969 40.375-6.226563 50.957032-23.761719 3.507812-5.808594 3.183593-13.15625-.820313-18.632812l-57.453125-78.660157c-4.714844-6.453125-13.335938-8.671875-20.582031-5.292969-7.242188 3.375-11.085938 11.40625-9.171875 19.167969l23.324218 94.574219c1.625 6.585938 7.042969 11.558594 13.746094 12.605469zm0 0" fill="#f8e47c" /><path d="m151.480469 1.570312c7.246093-3.378906 15.867187-1.160156 20.582031 5.292969l24.433594 33.449219c-12.238282 2.570312-28.65625 3.171875-49.996094-2.566406l-4.191406-17.007813c-1.914063-7.761719 1.929687-15.792969 9.171875-19.167969zm0 0" fill="#e88c98" /><path d="m165.632812 115.3125-7.722656-31.308594c34.894532 12.296875 58.296875 8.359375 72.703125 3.25 2.921875 5.230469 2.871094 11.683594-.277343 16.902344-10.582032 17.535156-30.71875 26.925781-50.957032 23.761719-6.703125-1.046875-12.121094-6.019531-13.746094-12.605469zm0 0" fill="#72cda2" /><path d="m284.394531 92.425781c-9.175781 19.671875-.425781 29.539063 13.101563 35.84375 13.523437 6.308594 26.707031 6.667969 35.882812-13.003906 9.171875-19.671875 10.257813-50.632813-3.269531-56.941406-13.523437-6.304688-36.542969 14.425781-45.714844 34.101562zm0 0" fill="#f0e4c0" /><path d="m400.589844 348.609375c-1.902344 0-3.835938-.285156-5.75-.886719-29.125-9.167968-52.777344-20.523437-70.292969-33.75-8.429687-6.363281-10.105469-18.355468-3.742187-26.78125 6.363281-8.429687 18.355468-10.101562 26.78125-3.738281 14.023437 10.585937 33.785156 19.9375 58.738281 27.789063 10.070312 3.171874 15.667969 13.910156 12.496093 23.980468-2.566406 8.164063-10.105468 13.386719-18.230468 13.386719zm0 0" fill="#f9f1da" /><path d="m406.324219 311.246094c-3.785157-1.191406-7.433594-2.421875-10.976563-3.679688l-12.617187 36.09375c3.925781 1.398438 7.957031 2.753906 12.109375 4.0625 1.914062.601563 3.84375.886719 5.75.886719 8.125 0 15.664062-5.222656 18.230468-13.382813 3.171876-10.074218-2.425781-20.8125-12.496093-23.980468zm0 0" fill="#495059" /><path class="animated pulse infinite" d="m122.019531 188.035156c15.632813-11.019531 37.007813-30.792968 35.847657-55.46875-.710938-15.035156-13.460938-26.875-28.472657-25.742187-7.40625.558593-13.859375 4.105469-18.277343 9.359375-5.265626-4.40625-12.234376-6.78125-19.625-6.042969-14.980469 1.492187-25.480469 15.363281-23.566407 30.296875 3.136719 24.5 27.625 40.261719 44.933594 48.398438 2.976563 1.398437 6.46875 1.09375 9.160156-.800782zm0 0" fill="#e88c98" /><path class="animated pulse infinite" d="m271.464844 174.554688c15.636718-11.019532 37.011718-30.792969 35.847656-55.464844-.707031-15.039063-13.457031-26.878906-28.46875-25.746094-7.410156.558594-13.859375 4.105469-18.28125 9.359375-5.261719-4.40625-12.230469-6.78125-19.625-6.042969-14.980469 1.492188-25.480469 15.363282-23.566406 30.296875 3.140625 24.5 27.625 40.261719 44.933594 48.398438 2.976562 1.398437 6.472656 1.09375 9.160156-.800781zm0 0" fill="#e88c98" /><path class="animated pulse infinite" d="m271.464844 174.554688c5.28125-3.722657 11.210937-8.441407 16.710937-14.011719-50.132812-16.679688-54.324219-44.269531-48.515625-63.722657-14.292968 2.128907-24.148437 15.632813-22.289062 30.136719 3.140625 24.5 27.625 40.261719 44.933594 48.398438 2.976562 1.398437 6.472656 1.09375 9.160156-.800781zm0 0" fill="#db818d" /><path d="m145.527344 235.375c-1.4375-11.722656-11.867188-18.101562-23.589844-16.660156-11.722656 1.4375-20.296875 10.148437-18.859375 21.871094 1.4375 11.722656 8.210937 25.328124 24.410156 23.339843s19.480469-16.828125 18.039063-28.550781zm0 0" fill="#495059" /><path class="animated pulse infinite" d="m122.019531 188.035156c5.277344-3.722656 11.210938-8.441406 16.710938-14.011718-50.132813-16.679688-54.328125-44.269532-48.515625-63.722657-14.296875 2.128907-24.152344 15.632813-22.292969 30.136719 3.140625 24.5 27.625 40.261719 44.933594 48.398438 2.980469 1.398437 6.472656 1.09375 9.164062-.800782zm0 0" fill="#db818d" /><path d="m52.0625 78c15.023438-5.519531 36.585938-16.875 40.992188-37.074219 2.683593-12.308593-5.058594-24.644531-17.441407-26.980469-6.109375-1.152343-12.089843.316407-16.800781 3.609376-3.300781-4.703126-8.421875-8.132813-14.554688-9.140626-12.4375-2.039062-23.929687 6.902344-25.617187 19.390626-2.769531 20.484374 13.609375 38.53125 25.839844 48.855468 2.105469 1.78125 4.996093 2.289063 7.582031 1.339844zm0 0" fill="#e88c98" /><path d="m52.0625 78c5.070312-1.863281 10.890625-4.394531 16.542969-7.707031-36.914063-24.34375-34.328125-47.554688-25.417969-62.019531-12.015625-1.375-22.90625 7.40625-24.546875 19.53125-2.769531 20.488281 13.609375 38.535156 25.84375 48.859374 2.101563 1.777344 4.992187 2.285157 7.578125 1.335938zm0 0" fill="#db818d" /><path id="corazon1" d="m471.652344 142.113281c18.871094-15.929687 44.144531-43.773437 39.871094-75.378906-2.605469-19.265625-20.339844-33.058594-39.519532-29.914063-9.46875 1.550782-17.367187 6.839844-22.460937 14.097657-7.265625-5.078125-16.496094-7.34375-25.921875-5.566407-19.101563 3.605469-31.050782 22.632813-26.90625 41.625 6.792968 31.164063 40.0625 48.683594 63.246094 57.199219 3.988281 1.464844 8.445312.679688 11.691406-2.0625zm0 0" fill="#e88c98" /><path d="m471.652344 142.113281c6.371094-5.378906 13.472656-12.121093 19.917968-19.902343-66.363281-15.8125-74.859374-50.832032-69.578124-76.507813-18.144532 4.351563-29.300782 22.828125-25.277344 41.273437 6.792968 31.164063 40.0625 48.683594 63.246094 57.199219 3.988281 1.464844 8.445312.679688 11.691406-2.0625zm0 0" fill="#db818d" /><path d="m365.996094 432.015625c2.351562-10.292969-4.085938-20.546875-14.378906-22.902344-1.3125-.296875-2.917969-.929687-4.714844-1.863281l-18.027344 33.734375c4.769531 2.5 9.550781 4.339844 14.21875 5.410156 1.433594.328125 2.867188.484375 4.277344.484375 8.71875 0 16.597656-6.003906 18.625-14.863281zm0 0" fill="#495059" /></svg>

      <section className='cake-wrapper'>
        <div class="candle">
          <div id="flame" class="lit"></div>
        </div>
        <div class="cake"></div>
        <div class="plate"></div>
      </section>

      <div>
        <Jello delay={200}>
          <section className='footer'>
            <button className='button' onClick={handerClick}>{buttonName}</button>
          </section>
        </Jello>
      </div>
    </>
  );
}

export default App;
